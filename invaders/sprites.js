function spriteVelocity(t){t.x=t.x+t.dx,t.y=t.y+t.dy}function spriteConstrain(t,e,i,s,n){t.x>i&&(t.dx=-t.dx,t.x=i),t.x<e&&(t.dx=-t.dx,t.x=e),t.y>n&&(t.dy=-t.dy,t.y=n),t.y<s&&(t.dy=-t.dy,t.y=s)}function spriteGravity(t,e){t.dy+=e}function Sprite(t,e,i,s,n,p){this.elem=t,this.x=e,this.y=i,this.sx=s,this.sy=n,this.elem.style.position="absolute",this.elem.style.left=e+"px",this.elem.style.top=i+"px",this.elem.style.width=s+"px",this.elem.style.height=n+"px",this.func=p}function SpritePane(t){this.elem=t,this.all=new Array,this.updating=new Array}function spriteOnKeyDown(t){spriteKeyStateMap_[getKeyFromEvent(t)]=!0,spriteInputElement.value=""}function spriteOnKeyUp(t){spriteKeyStateMap_[getKeyFromEvent(t)]=!1}function spriteKeyDown(t){return null==spriteKeyStateMap_&&(spriteKeyStateMap_=new Object),!!spriteKeyStateMap_[t]}function spriteSetKey(t,e){null!=spriteKeyStateMap_&&(spriteKeyStateMap_[t]=e)}Sprite.prototype.changeImage=function(t){this.elem.src=t},Sprite.prototype.update=function(){this.func&&(this.func(),this.updatePosition())},Sprite.prototype.updatePosition=function(){this.elem.style.left=this.x+"px",this.elem.style.top=this.y+"px"},Sprite.prototype.show=function(){this.elem.style.left=this.x+"px",this.elem.style.top=this.y+"px",this.elem.style.visibility="visible"},Sprite.prototype.hide=function(){this.elem.style.visibility="hidden"},Sprite.prototype.visible=function(){return"visible"==this.elem.style.visibility},Sprite.prototype.overlaps=function(t){return(this.x>t.x&&this.x<t.x+t.sx||this.x+this.sx>t.x&&this.x+this.sx<t.x+t.sx)&&(this.y>t.y&&this.y<t.y+t.sy||this.y+this.sy>t.y&&this.y+this.sy<t.y+t.sy)},SpritePane.prototype.create=function(t,e,i,s,n,p){if("string"==typeof t){var r=document.createElement("img");r.src=t,t=r}var y=new Sprite(t,e,i,s,n,p);return this.elem.appendChild(t),this.all.push(y),y},SpritePane.prototype.destroy=function(t){this.elem.removeChild(t.elem);for(var e=0;e<this.all.length;e++)if(this.all[e]==t)return void this.all.splice(e,1)},SpritePane.prototype.go=function(t){var e=this;t||(t=20),setInterval((function(){var t;for(t=0;t<e.updating.length;t++)e.updating[t]();for(t=0;t<e.all.length;t++)e.all[t].update()}),t)};var spriteKeyStateMap_=new Object,getKeyFromEvent=function(t){return t.keyCode?t.keyCode:event.keyCode?event.keyCode:t.charCode},spriteInputElement=document.getElementById("keys");spriteInputElement.focus();