<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Immuto - Epilogue | Daniel Earwicker </title> <meta name="author" content="Daniel Earwicker"> <meta name="description" content="You are almost certainly lost on the Internet. "> <meta name="keywords" content="coding, physics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.png?754e6b58bcf99910aed4f8d8638bd47f"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://danielearwicker.github.io/blog/2016/Immuto-Epilogue/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Daniel</span> Earwicker </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Immuto - Epilogue</h1> <p class="post-meta"> Created on December 20, 2016 </p> <p class="post-tags"> <a href="/blog/2016"> <i class="fa-solid fa-calendar fa-sm"></i> 2016 </a>   ·   <a href="/blog/tag/typescript"> <i class="fa-solid fa-hashtag fa-sm"></i> typescript</a>   <a href="/blog/tag/immuto"> <i class="fa-solid fa-hashtag fa-sm"></i> immuto</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>It’s been a couple of months since I had a scrap of time to do anything with <a href="https://github.com/danielearwicker/immuto" rel="external nofollow noopener" target="_blank">Immuto</a> - I’ve been up to my knees in WPF/C# instead (working for a living).</p> <p>This break has given me a new perspective (aside from the obvious one that WPF is yucky). The executive summary is that I don’t see myself ever using Immuto seriously. The way I look at it now is almost as a satire on the rigid idea of “single reducer function for the whole application state”. It wasn’t intended that way! I was genuinely into it and was expecting to use it in my job. But now it looks very different. And as Immuto is just a flavour of Redux, it’s a broader comment on Redux itself.</p> <p>What do I mean by a satire? I mean it’s like I was trying to show the absurdity of something by pretending to take it seriously. (Except I <em>was</em> taking it seriously). My dad told me a story from around 1969 when he went to a conference. The latest hot debate topic at the time was <a href="http://www.cs.utexas.edu/users/EWD/ewd02xx/EWD215.PDF" rel="external nofollow noopener" target="_blank">Goto Considered Harmful</a>, and some speaker put some source code on the overhead projector and invited the room to critique it. Hands went up and all the suggestions were to get rid of the GOTOs, of course. So as a group they began editing the code to try and get rid of the GOTOs and be good Structured Programmers, and the structure of the program become more and more absurd and unreadable as the exercise progressed.</p> <p>The moral is that <em>sometimes</em> a GOTO is the least bad option, so don’t be too dogmatic in applying your precious rules. But the point is, the presenter of that talk let the absurdity of the situation become apparent all by itself, merely by taking it seriously and seeing where that led. I feel I’ve done the same thing with Redux, except by accident.</p> <p>If we have a single reducer function, in a large complex application its going to end up large and complex. So we need to break it down into composable pieces and tie those pieces together. With a really slick declaritive way of creating and composing those pieces, this becomes second nature, and we can build applications of unlimited scope and cleverness, all the while fully conforming <em>to the letter if not the spirit</em> of the law that there must be a single reducer function for our whole app.</p> <p>There is a single reducer function… you just wouldn’t know this from looking at the code. Nor would you ever care.</p> <p>The same goes for the “single state atom”, the variable that holds the result of the most recent execution of the whole-app reducer. There is only one mutable variable in the entire app. But again, who cares? The value of that variable is some deep nested hierarchy within which their are many islands that each encapsulate some separate portion of the application state. So in any meaningful sense it’s not one value. It’s many.</p> <p>Yes, we artificially stitch them together so we can store them in a single state variable, but by doing so we introduce a need to constantly discard and rebuild all the outer structure every time something lower down is modified.</p> <p>All so that we can comply with a rule: single reducer, single state variable. What does this give us? In theory, easier debugging, and other facilities that depend on keeping old versions of our state tree. The killer demo is “look how easily I can implement undo!”</p> <p>But the truth is that you can add undo to any application that has the ability load/save its state to JSON. It doesn’t need to keep its state in one immutable tree. It just needs to be able to assemble all the pieces of its live state into a single “snapshot” tree when asked, and then later be able to parse such a snapshot and assign pieces of it to wherever they belong in the live state. <a href="https://github.com/danielearwicker/nimbah/blob/master/js/undo.js" rel="external nofollow noopener" target="_blank">Here’s an example I wrote four years ago</a>.</p> <p>As for debugging and understanding the correctness of your app, of course there’s no substitute for having a simple requirement so your app doesn’t need to be complex. In the real world, requirements are not simple. But we in software we (over and over) apply the golden rule of “divide and conquer”, breaking complex problems down into simple pieces that can be independently solved, reasoned about and tested. This is why Immuto was my necessary response to Redux.</p> <p>But if my large complex app is really just a lot of small simple apps stuck together, it doesn’t matter that much <em>how</em> I stick them together. Does it really create any issues if I have multiple independent stores, one for each piece? Of course not. Does it help much with anything if I insist on making them share a single store? Not really, no.</p> <p>I did progress somewhat with Immuto beyond what I committed/pushed. In particular, I got some way with polymorphism: a React component that could have multiple implementations, each implementation being able to store data of its own type within the state. I implemented recursive structures (e.g. a tree in which some nodes are folders with child nodes and others are leaves or terminals). It was kind of working! But it was complex. I loved that complexity, because I’m a nerd.</p> <p>But now I have the strange feeling that when I got exciting about Redux, I accepted its basic principles not because they conferred any advantage, but because I could see that they didn’t present any obstacles to a sufficiently smart person, and I wanted to prove it. It provided me with a nice challenge or diversion. It was a brain-teaser and I got deeply into it. But the end product is, I suspect, hard for anyone else to pick up and learn, so that in itself is an obstacle. If I were to foist it onto my team and someone asks me “But <em>why</em> do we need to do it this way?” there is no answer. It was just cool to figure out.</p> <p>RIP Immuto. You were fun!</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Not yet regretting the time you've spent here?</h2> <p class="mb-2">Keep reading:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/ai3/">Poorly Structured Notes on AI Part 3</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/ai2/">Poorly Structured Notes on AI Part 2</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/ai1/">Poorly Structured Notes on AI Part 1</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Prompt-Engineer/">How to become a prompt engineer</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/Time-reversible-events/">Time reversible events</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Daniel Earwicker. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>